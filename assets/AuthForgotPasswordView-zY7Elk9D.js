import{z as d,J as E,d as g,g as w,o as u,p as m,w as i,e as l,x as S,u as t,I as x,f as y,t as v,_ as T,h as N,y as R,K as p,A as V,b as h,k as C,a as I,i as L}from"./index-E1lsH67L.js";import{u as $,a as q}from"./mutation.composable-BQZy2jA9.js";import{Q as B}from"./queryKey.type-CxycCLMA.js";import{_ as K,a as M}from"./AuthFormSubmitButton.vue_vue_type_script_setup_true_lang-BjeYwIdp.js";import"./useQueryClient-Ct9uGIH0.js";const j=d.object({email:d.string().email()});function Q(){return $({queryFn:async({body:s})=>{await E.forgotPassword(s)},queryKeysToInvalidate:[{key:B.CURRENT_USER}]})}const U=g({__name:"AuthForgotPasswordForm",props:{form:{},lastLoginAttemptEmail:{}},setup(s){const r=s,{t:o}=w(),a=r.form.register("email",r.lastLoginAttemptEmail??void 0);return(e,c)=>(u(),m(T,{form:e.form},{default:i(()=>[l(t(x),S(t(a),{"is-required":!0,label:t(o)("form.fields.email"),placeholder:t(o)("auth.enter_your_email"),type:"email"}),null,16,["label","placeholder"]),l(K,{form:e.form,"is-always-enabled":!0},{default:i(()=>[y(v(t(o)("auth.reset_password")),1)]),_:1},8,["form"])]),_:1},8,["form"]))}}),z={class:"mt-4 flex justify-center"},W=g({__name:"AuthForgotPasswordView",setup(s){const r=N(),{lastLoginAttemptEmail:o}=R(r),a=p(!1),{t:e}=w(),c=q(),f=p(""),{form:A,onSubmitForm:b}=V({schema:j}),F=Q(),P=h(()=>a.value?e("auth.check_your_email"):e("auth.forgot_password")),k=h(()=>a.value?e("auth.instruction_email_sent_to",{email:f.value}):e("auth.forgot_password_message"));return b(async n=>{try{await F.execute({body:n}),a.value=!0,f.value=n.email}catch(_){c.show(_)}}),(n,_)=>(u(),m(M,{description:k.value,title:P.value},{default:i(()=>[a.value?C("",!0):(u(),m(U,{key:0,form:t(A),"last-login-attempt-email":t(o)},null,8,["form","last-login-attempt-email"])),I("div",z,[l(t(L),{to:{name:"login"},"icon-left":"arrowLeft",variant:"ghost"},{default:i(()=>[y(v(t(e)("auth.back_to_login")),1)]),_:1})])]),_:1},8,["description","title"]))}});export{W as default};
