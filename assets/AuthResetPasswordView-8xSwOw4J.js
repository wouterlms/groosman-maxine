import{a5 as g,z as a,K as P,d as _,g as l,o as u,p as i,w as c,e as p,x as k,u as o,G as v,f as I,t as R,y as T,L as x,B as A,b as D,k as F}from"./index-C7kCUYvj.js";import{u as q,a as B}from"./mutation.composable-zoKqTsQw.js";import{u as N}from"./typedRouteParams.composable-CZfMf48U.js";import{_ as S,a as V}from"./AuthFormSubmitButton.vue_vue_type_script_setup_true_lang-C4JUnnZJ.js";import"./useQueryClient-BN5MNRyi.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="a33de126-e842-4fd2-bf95-640f08137c0b",e._sentryDebugIdIdentifier="sentry-dbid-a33de126-e842-4fd2-bf95-640f08137c0b")}catch{}})();function $(e){return g().query}const C=a.object({email:a.string().email(),password:a.string().min(8),token:a.string()});function M(){return q({queryFn:async({body:e})=>{await P.resetPassword(e)},queryKeysToInvalidate:[]})}const E=_({__name:"AuthResetPasswordForm",props:{form:{}},setup(e){const s=e,{t}=l(),n=s.form.register("password");return(r,d)=>(u(),i(T,{form:r.form},{default:c(()=>[p(o(v),k(o(n),{label:o(t)("form.fields.password"),type:"password"}),null,16,["label"]),p(S,{form:r.form},{default:c(()=>[I(R(o(t)("auth.reset_password.action")),1)]),_:1},8,["form"])]),_:1},8,["form"]))}}),Q=_({__name:"AuthResetPasswordView",setup(e){const s=x(!1),{t}=l(),n=B(),{form:r,onSubmitForm:d}=A({schema:C}),w=N(),y=$();r.register("token",w.token),r.register("email",y.email);const b=M(),h=D(()=>s.value?t("auth.features.your_password_has_been_reset_you_can"):t("auth.reset_password.description"));return d(async f=>{try{await b.execute({body:f}),s.value=!0}catch(m){n.show(m)}}),(f,m)=>(u(),i(V,{description:h.value,title:o(t)("auth.reset_password.title")},{default:c(()=>[s.value?F("",!0):(u(),i(E,{key:0,form:o(r)},null,8,["form"]))]),_:1},8,["description","title"]))}});export{Q as default};
