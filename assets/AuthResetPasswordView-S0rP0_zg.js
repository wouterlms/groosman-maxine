import{a4 as g,z as a,J as b,d as _,g as l,o as u,p as i,w as c,e as f,x as k,u as r,G as R,f as v,t as A,_ as T,K as x,A as F,b as q,k as N}from"./index-E1lsH67L.js";import{u as S,a as V}from"./mutation.composable-BQZy2jA9.js";import{u as $}from"./typedRouteParams.composable-CFWYm5DS.js";import{_ as B,a as C}from"./AuthFormSubmitButton.vue_vue_type_script_setup_true_lang-BjeYwIdp.js";import"./useQueryClient-Ct9uGIH0.js";function M(o){return g().query}const G=a.object({email:a.string().email(),password:a.string().min(8),token:a.string()});function I(){return S({queryFn:async({body:o})=>{await b.resetPassword(o)},queryKeysToInvalidate:[]})}const K=_({__name:"AuthResetPasswordForm",props:{form:{}},setup(o){const e=o,{t:s}=l(),n=e.form.register("password");return(t,m)=>(u(),i(T,{form:t.form},{default:c(()=>[f(r(R),k(r(n),{label:r(s)("form.fields.password"),type:"password"}),null,16,["label"]),f(B,{form:t.form},{default:c(()=>[v(A(r(s)("auth.reset_password.action")),1)]),_:1},8,["form"])]),_:1},8,["form"]))}}),Q=_({__name:"AuthResetPasswordView",setup(o){const e=x(!1),{t:s}=l(),n=V(),{form:t,onSubmitForm:m}=F({schema:G}),w=$(),h=M();t.register("token",w.token),t.register("email",h.email);const y=I(),P=q(()=>e.value?s("auth.features.your_password_has_been_reset_you_can"):s("auth.reset_password.description"));return m(async p=>{try{await y.execute({body:p}),e.value=!0}catch(d){n.show(d)}}),(p,d)=>(u(),i(C,{description:P.value,title:r(s)("auth.reset_password.title")},{default:c(()=>[e.value?N("",!0):(u(),i(K,{key:0,form:r(t)},null,8,["form"]))]),_:1},8,["description","title"]))}});export{Q as default};
