function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AppConfirmDialog-uu_AiDvA.js","assets/index-E1lsH67L.js","assets/index-DXGPvDjb.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{as as y,at as b,au as C,av as U,aw as m,ax as N,z as f,d as p,g as v,o as h,p as g,w as u,e as c,H as T,f as x,t as S,u as n,_ as $,A as E,b as F,E as V}from"./index-E1lsH67L.js";import{U as M,_ as R}from"./user.service-CzpM2usr.js";import{u as A,a as B}from"./mutation.composable-BQZy2jA9.js";import{u as D}from"./typedRouter.composable-COdRdYtN.js";import{Q as I}from"./queryKey.type-CxycCLMA.js";import{_ as P,a as k}from"./UserFormName.vue_vue_type_script_setup_true_lang-DasoU3eu.js";import"./useQueryClient-Ct9uGIH0.js";import"./style.util-CHtjtCvc.js";function q(t){const r=y({component:()=>N(()=>import("./AppConfirmDialog-uu_AiDvA.js"),__vite__mapDeps([0,1,2]))});function o(e){const{t:a}=m.global;if(t.value){r.open({confirmText:a("shared.save"),description:a("shared.unsaved_changes_description"),onConfirm:()=>{r.close(),e()},title:a("shared.unsaved_changes_title")});return}e()}return b((e,a,s)=>{if(t.value){o(()=>{s()});return}s()}),C(()=>{window.onbeforeunload=null}),U(()=>{window.onbeforeunload=e=>t.value?(e=e??window.event,e!=null&&(e.returnValue=m.global.t("shared.unsaved_changes_description")),m.global.t("shared.unsaved_changes_description")):null}),{handleUnsavedClose:o}}const K=f.object({firstName:f.string().min(1),lastName:f.string().min(1)});function L(){return A({queryFn:async({body:t})=>await M.create(t),queryKeysToInvalidate:[{exact:!1,key:I.USERS}]})}const Q=p({__name:"UserCreateForm",props:{form:{}},setup(t){const r=t,{t:o}=v(),e=r.form.register("firstName"),a=r.form.register("lastName");return(s,l)=>(h(),g($,{form:s.form},{default:u(({formId:i})=>[c(P,{target:"header-actions"},{default:u(()=>[c(T,{"form-id":i,form:s.form},{default:u(()=>[x(S(n(o)("users.create.create_user")),1)]),_:2},1032,["form-id","form"])]),_:2},1024),c(k,{"first-name":n(e),"last-name":n(a)},null,8,["first-name","last-name"])]),_:1},8,["form"]))}}),Y=p({__name:"UserCreateView",setup(t){const{t:r}=v(),o=D(),e=V(),a=B(),s=L(),l=[{label:r("shared.users"),to:{name:"user-overview"},type:"route"},{label:r("users.create.title"),type:"page"}],{form:i,onSubmitForm:w}=E({schema:K});return q(F(()=>i.isDirty)),w(async _=>{try{await s.execute({body:_}),e.success({title:r("users.create.success")}),await o.push({name:"user-overview"})}catch(d){a.show(d)}}),(_,d)=>(h(),g(R,{breadcrumbs:l,title:n(r)("users.create.title")},{default:u(()=>[c(Q,{form:n(i)},null,8,["form"])]),_:1},8,["title"]))}});export{Y as default};
