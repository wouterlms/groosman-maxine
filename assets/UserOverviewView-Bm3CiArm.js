import{d as m,o as u,p as d,w as i,s as b,a5 as y,a as S,e as p,u as t,a6 as U,f as I,t as E,a7 as T,l as w,a8 as N,a9 as k,g as f,K as V,i as $,aa as D,b as h,ab as M,U as O,c as R,ac as B,ad as C,ae as L}from"./index-E1lsH67L.js";import{_ as A,U as F}from"./user.service-CzpM2usr.js";import{u as Q}from"./query.composable-E1x3G_DG.js";import{Q as P}from"./queryKey.type-CxycCLMA.js";import{u as q}from"./typedRouter.composable-COdRdYtN.js";import"./useQueryClient-Ct9uGIH0.js";const z=m({__name:"AppTablePage",props:{subtitle:{default:null},title:{}},setup(s){const a=s;return(e,n)=>(u(),d(A,{subtitle:a.subtitle,title:a.title,class:"h-screen overflow-hidden"},{"header-actions":i(()=>[b(e.$slots,"header-actions")]),default:i(()=>[b(e.$slots,"default")]),_:3},8,["subtitle","title"]))}}),H={FIVE_MINUTES:300*1e3,FOUR_MINUTES:240*1e3,ONE_MINUTE:60*1e3,TEN_SECONDS:10*1e3,THIRTY_SECONDS:30*1e3,THREE_MINUTES:180*1e3,TWO_MINUTES:120*1e3};function K(s){return Q({queryFn:()=>F.getAll(s.value),queryKey:{key:P.USERS,params:s.value},staleTime:H.FIVE_MINUTES})}const W={class:"px-3 py-2"},Y=m({__name:"AppNewItemButton",props:{label:{},to:{}},setup(s){const a=s,e=["ctrl","n"],n=q();function o(){n.push(a.to)}return y({command:{keys:e,onPressed:o,type:"combination"},scope:"global"}),(l,r)=>(u(),d(t(w),{"disable-hoverable-content":!0,"delay-duration":300,side:"bottom"},{content:i(()=>[S("div",W,[p(t(U),{keys:e,"has-border":!0,"command-type":"combination"})])]),default:i(()=>[p(t(T),{to:a.to,"icon-left":"plus"},{default:i(()=>[I(E(a.label),1)]),_:1},8,["to"])]),_:1}))}}),Z={class:"mr-2"},j=m({__name:"AppSearchInput",props:N({placeholder:{default:null}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(s){const a=s,e=k(s,"modelValue"),{t:n}=f(),o=V(null);y({command:{keys:["meta","f"],onPressed:()=>{var r;(r=o.value)==null||r.$el.focus()},type:"combination"},scope:"global"});function l(){e.value=null}return(r,c)=>(u(),d(t(D),{ref_key:"appInputRef",ref:o,modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=_=>e.value=_),placeholder:a.placeholder??t(n)("components.search_input.placeholder"),type:"search"},{right:i(()=>[S("div",Z,[e.value===null||e.value===""?(u(),d(t(U),{key:0,keys:["meta","f"],"command-type":"combination"})):(u(),d(t($),{key:1,variant:"secondary",size:"xs",onClick:l},{default:i(()=>[I(E(t(n)("components.search_input.clear")),1)]),_:1}))])]),_:1},8,["modelValue","placeholder"]))}});function G(s){const a=V(s.defaultValue??""),e=h({get:()=>a.value.trim()===""?null:a.value,set:l=>{a.value=l??""}}),n=M(e,300),o=h(()=>n.value!==e.value);return O(n,l=>{s.onDebounceSearch(l)}),{debouncedSearch:n,isDebouncing:o,search:e}}const J={class:"flex gap-x-2"},X=m({__name:"UserOverviewHeaderActions",props:{isLoading:{type:Boolean},pagination:{}},emits:["search"],setup(s,{emit:a}){var _;const e=s,n=a,{t:o}=f(),l=((_=e.pagination.paginationOptions.value.filters)==null?void 0:_.search)??"",{isDebouncing:r,search:c}=G({defaultValue:l,onDebounceSearch:g=>{n("search",g)}});return(g,v)=>(u(),R("div",J,[p(j,{modelValue:t(c),"onUpdate:modelValue":v[0]||(v[0]=x=>B(c)?c.value=x:null),"is-loading":e.isLoading||t(r),class:"w-60"},null,8,["modelValue","is-loading"]),p(Y,{to:{name:"user-create"},label:t(o)("users.overview.new_user")},null,8,["label"])]))}}),ee=m({__name:"UserOverviewTable",props:{data:{},isLoading:{type:Boolean},pagination:{}},setup(s){const a=s,{t:e}=f(),n=[{id:"uuid",isSortable:!0,label:"UUID",size:"minmax(400px, 500px)",value:o=>o.uuid},{id:"name",isSortable:!0,label:e("shared.name"),size:"500px",value:o=>o.fullName}];return(o,l)=>(u(),d(t(C),{columns:n,data:a.data,"empty-message":t(e)("users.overview.empty"),"row-to":r=>({name:"user-detail",params:{userUuid:r.uuid}}),filters:[],"pin-first-column":!0,"is-loading":a.isLoading,pagination:a.pagination,title:t(e)("shared.users")},null,8,["data","empty-message","row-to","is-loading","pagination","title"]))}}),re=m({__name:"UserOverviewView",setup(s){const{t:a}=f(),e=L({id:"users"}),n=K(e.paginationOptions),o=h(()=>n.isLoading.value);function l(r){e.handleFilterChange({search:r})}return(r,c)=>(u(),d(z,{title:t(a)("shared.users")},{"header-actions":i(()=>[p(X,{pagination:t(e),"is-loading":o.value,onSearch:l},null,8,["pagination","is-loading"])]),default:i(()=>[p(ee,{data:t(n).data.value,"is-loading":o.value,pagination:t(e)},null,8,["data","is-loading","pagination"])]),_:1},8,["title"]))}});export{re as default};
