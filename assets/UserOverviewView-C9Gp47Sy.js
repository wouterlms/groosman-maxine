import{d as m,o as u,p as d,w as i,s as v,a5 as k,a6 as y,a as w,e as p,u as s,a7 as x,f as I,t as V,a8 as D,l as $,a9 as B,aa as E,g as _,K as S,i as T,ab as L,b as g,ac as N,U as A,c as C,ad as M,ae as O,af as Q}from"./index-CGlgPuEt.js";import{_ as R,U as P}from"./user.service-ijSwUZN-.js";import{u as q}from"./query.composable-B0NZ0lJr.js";import{Q as z}from"./queryKey.type-DuZL0onf.js";import{u as F}from"./typedRouter.composable-MlTZWMT6.js";import"./useQueryClient-ylb1_Lpr.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new Error().stack;a&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[a]="99308173-8b9e-4493-986e-8ec39eafc140",t._sentryDebugIdIdentifier="sentry-dbid-99308173-8b9e-4493-986e-8ec39eafc140")}catch{}})();const K=m({__name:"AppTablePage",props:{subtitle:{default:null},title:{}},setup(t){const a=t;return(e,n)=>(u(),d(R,{subtitle:a.subtitle,title:a.title,class:"h-screen overflow-hidden"},{"header-actions":i(()=>[v(e.$slots,"header-actions")]),default:i(()=>[v(e.$slots,"default")]),_:3},8,["subtitle","title"]))}});function H(t){return q({queryFn:()=>P.getAll(t.value),queryKey:{key:z.USERS,params:t.value},staleTime:k.FIVE_MINUTES})}const W={class:"px-3 py-2"},Z=m({__name:"AppNewItemButton",props:{label:{},to:{}},setup(t){const a=t,e=["ctrl","n"],n=F();function o(){n.push(a.to)}return y({command:{keys:e,onPressed:o,type:"combination"},scope:"global"}),(l,r)=>(u(),d(s($),{"disable-hoverable-content":!0,"delay-duration":300,side:"bottom"},{content:i(()=>[w("div",W,[p(s(x),{keys:e,"has-border":!0,"command-type":"combination"})])]),default:i(()=>[p(s(D),{to:a.to,"icon-left":"plus"},{default:i(()=>[I(V(a.label),1)]),_:1},8,["to"])]),_:1}))}}),j={class:"mr-2"},G=m({__name:"AppSearchInput",props:B({placeholder:{default:null}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const a=t,e=E(t,"modelValue"),{t:n}=_(),o=S(null);y({command:{keys:["meta","f"],onPressed:()=>{var r;(r=o.value)==null||r.$el.focus()},type:"combination"},scope:"global"});function l(){e.value=null}return(r,c)=>(u(),d(s(L),{ref_key:"appInputRef",ref:o,modelValue:e.value,"onUpdate:modelValue":c[0]||(c[0]=f=>e.value=f),placeholder:a.placeholder??s(n)("components.search_input.placeholder"),type:"search"},{right:i(()=>[w("div",j,[e.value===null||e.value===""?(u(),d(s(x),{key:0,keys:["meta","f"],"command-type":"combination"})):(u(),d(s(T),{key:1,variant:"secondary",size:"xs",onClick:l},{default:i(()=>[I(V(s(n)("components.search_input.clear")),1)]),_:1}))])]),_:1},8,["modelValue","placeholder"]))}});function J(t){const a=S(t.defaultValue??""),e=g({get:()=>a.value.trim()===""?null:a.value,set:l=>{a.value=l??""}}),n=N(e,300),o=g(()=>n.value!==e.value);return A(n,l=>{t.onDebounceSearch(l)}),{debouncedSearch:n,isDebouncing:o,search:e}}const X={class:"flex gap-x-2"},Y=m({__name:"UserOverviewHeaderActions",props:{isLoading:{type:Boolean},pagination:{}},emits:["search"],setup(t,{emit:a}){var f;const e=t,n=a,{t:o}=_(),l=((f=e.pagination.paginationOptions.value.filters)==null?void 0:f.search)??"",{isDebouncing:r,search:c}=J({defaultValue:l,onDebounceSearch:h=>{n("search",h)}});return(h,b)=>(u(),C("div",X,[p(G,{modelValue:s(c),"onUpdate:modelValue":b[0]||(b[0]=U=>M(c)?c.value=U:null),"is-loading":e.isLoading||s(r),class:"w-60"},null,8,["modelValue","is-loading"]),p(Z,{to:{name:"user-create"},label:s(o)("users.overview.new_user")},null,8,["label"])]))}}),ee=m({__name:"UserOverviewTable",props:{data:{},isLoading:{type:Boolean},pagination:{}},setup(t){const a=t,{t:e}=_(),n=[{id:"uuid",isSortable:!0,label:"UUID",size:"minmax(400px, 500px)",value:o=>o.uuid},{id:"name",isSortable:!0,label:e("shared.name"),size:"500px",value:o=>o.fullName}];return(o,l)=>(u(),d(s(O),{columns:n,data:a.data,"empty-message":s(e)("users.overview.empty"),"row-to":r=>({name:"user-detail",params:{userUuid:r.uuid}}),filters:[],"pin-first-column":!0,"is-loading":a.isLoading,pagination:a.pagination,title:s(e)("shared.users")},null,8,["data","empty-message","row-to","is-loading","pagination","title"]))}}),re=m({__name:"UserOverviewView",setup(t){const{t:a}=_(),e=Q({id:"users"}),n=H(e.paginationOptions),o=g(()=>n.isLoading.value);function l(r){e.handleFilterChange({search:r})}return(r,c)=>(u(),d(K,{title:s(a)("shared.users")},{"header-actions":i(()=>[p(Y,{pagination:s(e),"is-loading":o.value,onSearch:l},null,8,["pagination","is-loading"])]),default:i(()=>[p(ee,{data:s(n).data.value,"is-loading":o.value,pagination:s(e)},null,8,["data","is-loading","pagination"])]),_:1},8,["title"]))}});export{re as default};
