import{u as w,_ as N}from"./userDetail.query-nYBGIqpu.js";import{u as x}from"./typedRouteParams.composable-CBwSUAHG.js";import{z as f,d as c,g as U,o as d,p,w as t,e as a,H as D,f as I,t as S,u as o,_ as T,A as $,b as v,E as F}from"./index-CGlgPuEt.js";import{U as E,_ as k,a as q}from"./user.service-ijSwUZN-.js";import{u as Q,a as R}from"./mutation.composable-BpEpAF7l.js";import{u as V}from"./typedRouter.composable-MlTZWMT6.js";import{Q as b}from"./queryKey.type-DuZL0onf.js";import{_ as A,a as M}from"./UserFormName.vue_vue_type_script_setup_true_lang-DxwifIF6.js";import"./_plugin-vue_export-helper-5heKHmp9.js";import"./query.composable-B0NZ0lJr.js";import"./useQueryClient-ylb1_Lpr.js";import"./style.util-RI-0Lr3x.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[e]="0ff82a84-eb60-41c2-bd4b-b3de9f3d48f3",r._sentryDebugIdIdentifier="sentry-dbid-0ff82a84-eb60-41c2-bd4b-b3de9f3d48f3")}catch{}})();const P=f.object({firstName:f.string().min(1),lastName:f.string().min(1)});function B(){return Q({queryFn:async({body:r,params:e})=>await E.update(e.userUuid,r),queryKeysToInvalidate:[{exact:!1,key:b.USERS},{exact:!0,key:b.USER_DETAIL,params:{userUuid:r=>r.uuid}}]})}const C=c({__name:"UserUpdateForm",props:{form:{}},setup(r){const e=r,{t:s}=U(),u=e.form.register("firstName"),n=e.form.register("lastName");return(i,_)=>(d(),p(T,{form:e.form},{default:t(({formId:m})=>[a(A,{target:"header-actions"},{default:t(()=>[a(D,{"form-id":m,form:e.form},{default:t(()=>[I(S(o(s)("form.save_changes")),1)]),_:2},1032,["form-id","form"])]),_:2},1024),a(M,{"first-name":o(u),"last-name":o(n)},null,8,["first-name","last-name"])]),_:1},8,["form"]))}}),K=c({__name:"UserUpdateView",props:{user:{}},setup(r){const e=r,{t:s}=U(),u=V(),n=F(),i=R(),_=B(),m=[{label:s("shared.users"),to:{name:"user-overview"},type:"route"},{label:e.user.fullName,to:{name:"user-detail",params:{userUuid:e.user.uuid}},type:"route"},{label:s("shared.edit"),type:"page"}],{form:g,onSubmitForm:h}=$({initialState:v(()=>q.toUpdateForm(e.user)),schema:P});return h(async l=>{try{await _.execute({body:l,params:{userUuid:e.user.uuid}}),n.success({title:s("users.update.success")}),await u.push({name:"user-detail",params:{userUuid:e.user.uuid}})}catch(y){i.show(y)}}),(l,y)=>(d(),p(k,{breadcrumbs:m,title:e.user.fullName},{default:t(()=>[a(C,{form:o(g)},null,8,["form"])]),_:1},8,["title"]))}}),re=c({__name:"UserUpdateViewDataProvider",setup(r){const e=x(),s=w(e.userUuid);return(u,n)=>(d(),p(N,{queries:{user:o(s)}},{default:t(({data:i})=>[a(K,{user:i.user},null,8,["user"])]),_:1},8,["queries"]))}});export{re as default};
