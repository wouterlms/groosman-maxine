import{z as _,J as F,d as h,g as y,o as u,p as l,w as n,e as m,x as P,u as t,I as S,f as w,t as b,_ as x,h as T,y as D,K as p,A as N,b as g,k as R,a as V,i as C}from"./index-CGlgPuEt.js";import{u as L,a as $}from"./mutation.composable-BpEpAF7l.js";import{Q as q}from"./queryKey.type-DuZL0onf.js";import{_ as B,a as K}from"./AuthFormSubmitButton.vue_vue_type_script_setup_true_lang-C5MdiOmZ.js";import"./useQueryClient-ylb1_Lpr.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new Error().stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="16c0a683-c319-4636-b5b3-66e380b6a079",e._sentryDebugIdIdentifier="sentry-dbid-16c0a683-c319-4636-b5b3-66e380b6a079")}catch{}})();const M=_.object({email:_.string().email()});function j(){return L({queryFn:async({body:e})=>{await F.forgotPassword(e)},queryKeysToInvalidate:[{key:q.CURRENT_USER}]})}const Q=h({__name:"AuthForgotPasswordForm",props:{form:{},lastLoginAttemptEmail:{}},setup(e){const o=e,{t:s}=y(),r=o.form.register("email",o.lastLoginAttemptEmail??void 0);return(a,c)=>(u(),l(x,{form:a.form},{default:n(()=>[m(t(S),P(t(r),{"is-required":!0,label:t(s)("form.fields.email"),placeholder:t(s)("auth.enter_your_email"),type:"email"}),null,16,["label","placeholder"]),m(B,{form:a.form,"is-always-enabled":!0},{default:n(()=>[w(b(t(s)("auth.reset_password")),1)]),_:1},8,["form"])]),_:1},8,["form"]))}}),U={class:"mt-4 flex justify-center"},W=h({__name:"AuthForgotPasswordView",setup(e){const o=T(),{lastLoginAttemptEmail:s}=D(o),r=p(!1),{t:a}=y(),c=$(),f=p(""),{form:v,onSubmitForm:A}=N({schema:M}),I=j(),k=g(()=>r.value?a("auth.check_your_email"):a("auth.forgot_password")),E=g(()=>r.value?a("auth.instruction_email_sent_to",{email:f.value}):a("auth.forgot_password_message"));return A(async i=>{try{await I.execute({body:i}),r.value=!0,f.value=i.email}catch(d){c.show(d)}}),(i,d)=>(u(),l(K,{description:E.value,title:k.value},{default:n(()=>[r.value?R("",!0):(u(),l(Q,{key:0,form:t(v),"last-login-attempt-email":t(s)},null,8,["form","last-login-attempt-email"])),V("div",U,[m(t(C),{to:{name:"login"},"icon-left":"arrowLeft",variant:"ghost"},{default:n(()=>[w(b(t(a)("auth.back_to_login")),1)]),_:1})])]),_:1},8,["description","title"]))}});export{W as default};
