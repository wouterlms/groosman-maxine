import{z as _,K as F,d as h,g as y,o as u,p as l,w as n,e as c,x as P,u as t,I as S,f as w,t as b,y as x,h as T,A as D,L as p,B as L,b as g,k as N,a as R,i as V}from"./index-C7kCUYvj.js";import{u as B,a as C}from"./mutation.composable-zoKqTsQw.js";import{Q as $}from"./queryKey.type-54dYNvH0.js";import{_ as q,a as K}from"./AuthFormSubmitButton.vue_vue_type_script_setup_true_lang-C4JUnnZJ.js";import"./useQueryClient-BN5MNRyi.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new Error().stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="76de897b-0c09-441c-a1ea-2b958783cc0b",e._sentryDebugIdIdentifier="sentry-dbid-76de897b-0c09-441c-a1ea-2b958783cc0b")}catch{}})();const M=_.object({email:_.string().email()});function j(){return B({queryFn:async({body:e})=>{await F.forgotPassword(e)},queryKeysToInvalidate:[{key:$.CURRENT_USER}]})}const Q=h({__name:"AuthForgotPasswordForm",props:{form:{},lastLoginAttemptEmail:{}},setup(e){const o=e,{t:s}=y(),r=o.form.register("email",o.lastLoginAttemptEmail??void 0);return(a,m)=>(u(),l(x,{form:a.form},{default:n(()=>[c(t(S),P(t(r),{"is-required":!0,label:t(s)("form.fields.email"),placeholder:t(s)("auth.enter_your_email"),type:"email"}),null,16,["label","placeholder"]),c(q,{form:a.form,"is-always-enabled":!0},{default:n(()=>[w(b(t(s)("auth.reset_password")),1)]),_:1},8,["form"])]),_:1},8,["form"]))}}),U={class:"mt-4 flex justify-center"},W=h({__name:"AuthForgotPasswordView",setup(e){const o=T(),{lastLoginAttemptEmail:s}=D(o),r=p(!1),{t:a}=y(),m=C(),f=p(""),{form:v,onSubmitForm:A}=L({schema:M}),I=j(),k=g(()=>r.value?a("auth.check_your_email"):a("auth.forgot_password")),E=g(()=>r.value?a("auth.instruction_email_sent_to",{email:f.value}):a("auth.forgot_password_message"));return A(async i=>{try{await I.execute({body:i}),r.value=!0,f.value=i.email}catch(d){m.show(d)}}),(i,d)=>(u(),l(K,{description:E.value,title:k.value},{default:n(()=>[r.value?N("",!0):(u(),l(Q,{key:0,form:t(v),"last-login-attempt-email":t(s)},null,8,["form","last-login-attempt-email"])),R("div",U,[c(t(V),{to:{name:"login"},"icon-left":"arrowLeft",variant:"ghost"},{default:n(()=>[w(b(t(a)("auth.back_to_login")),1)]),_:1})])]),_:1},8,["description","title"]))}});export{W as default};
