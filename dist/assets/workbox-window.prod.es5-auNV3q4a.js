(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new Error().stack;r&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[r]="2983773c-a1de-44c6-b2b9-5ab721c4c632",n._sentryDebugIdIdentifier="sentry-dbid-2983773c-a1de-44c6-b2b9-5ab721c4c632")}catch{}})();try{self["workbox:window:7.0.0"]&&_()}catch{}function E(n,r){return new Promise(function(e){var i=new MessageChannel;i.port1.onmessage=function(v){e(v.data)},n.postMessage(r,[i.port2])})}function W(n,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function S(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,i=new Array(r);e<r;e++)i[e]=n[e];return i}function k(n,r){var e;if(typeof Symbol>"u"||n[Symbol.iterator]==null){if(Array.isArray(n)||(e=function(v,h){if(v){if(typeof v=="string")return S(v,h);var l=Object.prototype.toString.call(v).slice(8,-1);return l==="Object"&&v.constructor&&(l=v.constructor.name),l==="Map"||l==="Set"?Array.from(v):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?S(v,h):void 0}}(n))||r&&n&&typeof n.length=="number"){e&&(n=e);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(e=n[Symbol.iterator]()).next.bind(e)}try{self["workbox:core:7.0.0"]&&_()}catch{}var w=function(){var n=this;this.promise=new Promise(function(r,e){n.resolve=r,n.reject=e})};function b(n,r){var e=location.href;return new URL(n,e).href===new URL(r,e).href}var g=function(n,r){this.type=n,Object.assign(this,r)};function p(n,r,e){return e?r?r(n):n:(n&&n.then||(n=Promise.resolve(n)),r?n.then(r):n)}function L(){}var j={type:"SKIP_WAITING"};function P(n,r){if(!r)return n&&n.then?n.then(L):Promise.resolve()}var I=function(n){var r,e;function i(f,c){var t,o;return c===void 0&&(c={}),(t=n.call(this)||this).nn={},t.tn=0,t.rn=new w,t.en=new w,t.on=new w,t.un=0,t.an=new Set,t.cn=function(){var s=t.fn,a=s.installing;t.tn>0||!b(a.scriptURL,t.sn.toString())||performance.now()>t.un+6e4?(t.vn=a,s.removeEventListener("updatefound",t.cn)):(t.hn=a,t.an.add(a),t.rn.resolve(a)),++t.tn,a.addEventListener("statechange",t.ln)},t.ln=function(s){var a=t.fn,u=s.target,d=u.state,y=u===t.vn,m={sw:u,isExternal:y,originalEvent:s};!y&&t.mn&&(m.isUpdate=!0),t.dispatchEvent(new g(d,m)),d==="installed"?t.wn=self.setTimeout(function(){d==="installed"&&a.waiting===u&&t.dispatchEvent(new g("waiting",m))},200):d==="activating"&&(clearTimeout(t.wn),y||t.en.resolve(u))},t.dn=function(s){var a=t.hn,u=a!==navigator.serviceWorker.controller;t.dispatchEvent(new g("controlling",{isExternal:u,originalEvent:s,sw:a,isUpdate:t.mn})),u||t.on.resolve(a)},t.gn=(o=function(s){var a=s.data,u=s.ports,d=s.source;return p(t.getSW(),function(){t.an.has(d)&&t.dispatchEvent(new g("message",{data:a,originalEvent:s,ports:u,sw:d}))})},function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];try{return Promise.resolve(o.apply(this,s))}catch(u){return Promise.reject(u)}}),t.sn=f,t.nn=c,navigator.serviceWorker.addEventListener("message",t.gn),t}e=n,(r=i).prototype=Object.create(e.prototype),r.prototype.constructor=r,r.__proto__=e;var v,h,l=i.prototype;return l.register=function(f){var c=(f===void 0?{}:f).immediate,t=c!==void 0&&c;try{var o=this;return function(s,a){var u=s();return u&&u.then?u.then(a):a(u)}(function(){if(!t&&document.readyState!=="complete")return P(new Promise(function(s){return window.addEventListener("load",s)}))},function(){return o.mn=!!navigator.serviceWorker.controller,o.yn=o.pn(),p(o.bn(),function(s){o.fn=s,o.yn&&(o.hn=o.yn,o.en.resolve(o.yn),o.on.resolve(o.yn),o.yn.addEventListener("statechange",o.ln,{once:!0}));var a=o.fn.waiting;return a&&b(a.scriptURL,o.sn.toString())&&(o.hn=a,Promise.resolve().then(function(){o.dispatchEvent(new g("waiting",{sw:a,wasWaitingBeforeRegister:!0}))}).then(function(){})),o.hn&&(o.rn.resolve(o.hn),o.an.add(o.hn)),o.fn.addEventListener("updatefound",o.cn),navigator.serviceWorker.addEventListener("controllerchange",o.dn),o.fn})})}catch(s){return Promise.reject(s)}},l.update=function(){try{return this.fn?P(this.fn.update()):void 0}catch(f){return Promise.reject(f)}},l.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},l.messageSW=function(f){try{return p(this.getSW(),function(c){return E(c,f)})}catch(c){return Promise.reject(c)}},l.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&E(this.fn.waiting,j)},l.pn=function(){var f=navigator.serviceWorker.controller;return f&&b(f.scriptURL,this.sn.toString())?f:void 0},l.bn=function(){try{var f=this;return function(c,t){try{var o=c()}catch(s){return t(s)}return o&&o.then?o.then(void 0,t):o}(function(){return p(navigator.serviceWorker.register(f.sn,f.nn),function(c){return f.un=performance.now(),c})},function(c){throw c})}catch(c){return Promise.reject(c)}},v=i,(h=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&W(v.prototype,h),i}(function(){function n(){this.Pn=new Map}var r=n.prototype;return r.addEventListener=function(e,i){this.Sn(e).add(i)},r.removeEventListener=function(e,i){this.Sn(e).delete(i)},r.dispatchEvent=function(e){e.target=this;for(var i,v=k(this.Sn(e.type));!(i=v()).done;)(0,i.value)(e)},r.Sn=function(e){return this.Pn.has(e)||this.Pn.set(e,new Set),this.Pn.get(e)},n}());export{I as Workbox,g as WorkboxEvent,E as messageSW};
